@using PHP.Sales.Core.Models.System
@model Transaction

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create</h2>

<div class="edit-transaction">
    <div class="edit-transaction__form">
        @using (Html.BeginForm())
        {
            @Html.HiddenFor(x => x.ID)

            <div class="form-group">
                <!-- LIST OUT SALES CONTENTS -->
                
                <table>
                    <tr>
                        <th>
                            @Html.DisplayFor(modelItem => Model.Sales.First().ProductID);
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => Model.Sales.First().Name);
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => Model.Sales.First().QTY);
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => Model.Sales.First().Price);
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => Model.Sales.First().GST);
                        </th>
                    </tr>
                    @foreach (var sale in Model.Sales)
                    {
                        @Html.Partial("TransactionEditorRow", sale);
                    }
                    
                    <tr>
                        <td colspan="5">
                            @Html.ActionLink("Add another...", "BlankRowEditor", null, new { id = "addItem" });
                        </td>
                    </tr>
                </table>

            </div>
            <input type="submit" value="Submit" />
        }
    </div>
</div>

<script>
$("#addItem").click(function () {
        $.ajax({
            url: this.href,
            cache: false,
            success: function (html) { $("#editorRows").append(html); }
        });
        return false;
    });

$("a.deleteRow").live("click", function () {
    $(this).parents("div.editorRow:first").remove();
    return false;
});
</script>